#!/usr/bin/env python
"""Run Pomodoro

Usage:
    pomo [-l FILE] DURATION [DESCRIPTION ...]

Options:
    -l FILE --log-file=FILE  name of log file to write duration to
"""
from docopt import docopt

from pomo import utils, core
from pomo import version

TIMES = {
    'test': 6,
    'work': 60*25,
    'short': 60*5,
    'long': 60*15,
    'snooze': 60*3,
}


def done():
    return False


ACTIONS = {'d': ('Done', done)}


if __name__ == '__main__':
    docopt = docopt(__doc__, version=version)

    description = ' '.join(docopt['DESCRIPTION'])
    duration = TIMES[docopt['DURATION']]

    print('{}: {}'.format(docopt['DURATION'], description))
    dt = core.start_interval(duration, ACTIONS)
    print('\rInterval:', dt)

    if docopt['--log-file'] is not None:
        utils.write_info(docopt['--log-file'], dt, description)
