
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>4. Implementation &#8212; Lightbus 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="3. Concerns" href="concerns.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="implementation">
<h1>4. Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="principles">
<h2>4.1. Principles<a class="headerlink" href="#principles" title="Permalink to this headline">¶</a></h2>
<p>TBA</p>
</div>
<div class="section" id="why-amqp">
<h2>4.2. Why AMQP<a class="headerlink" href="#why-amqp" title="Permalink to this headline">¶</a></h2>
<p>For the reasons detailed previously I am proposing Lightbus be
tightly coupled to the underlying broker (i.e. because
supporting multiple brokers leads to significant complexity in other popular message queues).</p>
<p>I am also proposing that the broker be AMQP-based
(e.g. <a class="reference external" href="https://www.rabbitmq.com">RabbitMQ</a>, <a class="reference external" href="http://activemq.apache.org/">ActiveMQ</a>). This is because I believe
AMQP provides the features required to build a bus without requiring a custom broker.
In particular, it provides the decoupling of publishers and consumers.</p>
<p>For example, I want to send a <code class="docutils literal"><span class="pre">user.registered</span></code> event from App A. App A should
be able to send this event without knowing if anyone is listening for it, without knowing
what queue it should go on, and without knowing anything about the implementation
of any event handlers. Moreover, App B should be able to listen for <code class="docutils literal"><span class="pre">user.registered</span></code> without
having to know any specific details about where the event comes from.</p>
<p>This isn’t possible with brokers such as Redis because App A needs push a message
to the queue that App B is listening on. App A therefore needs to know that App B exists and
that it is listening on a particular queue. Additionally, if App C then also wants to listen
for the event then it will need its own queue. At this point App A needs to enqueue the message <em>twice</em>,
once for App B and once for App C.</p>
<p>AMQP solves this for us with the concept of ‘exchanges’.
With AMQP, App B would create its own queue and configure it to receive messages
from one or more exchanges, perhaps also filtering for only certain messages.
App A sends a message to the AMQP <em>exchange</em>. AMQP then places that message into
each queue listening on that exchange. This includes the queue that App B created,
and therefore App B receives the message.</p>
<p>Note that in this case App A only had to know what exchange to send the message to,
and the logic for receiving messages lies entirely in the hands of the receivers.
App C and App D could come along and create their own queues and receive events
without App A ever knowing or caring.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="motivation.html#task-queue-vs-bus"><span class="std std-ref">Task queue vs bus</span></a></p>
</div>
</div>
<div class="section" id="api-first-sketch">
<h2>4.3. API first sketch<a class="headerlink" href="#api-first-sketch" title="Permalink to this headline">¶</a></h2>
<p>TBA</p>
<div class="figure align-center" id="id1">
<img alt="Decaying machinery" src="_images/huh.jpg" />
<p class="caption"><span class="caption-text">Lightbus, a series of corkscrews. I hope this kept you interested.</span></p>
<div class="legend">
If you like it, <a class="reference external" href="https://github.com/adamcharnock/lightbus">star it</a></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Lightbus</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=adamcharnock&repo=lightbus&type=star&count=False&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="motivation.html">1. Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="alternatives.html">2. Alternatives</a></li>
<li class="toctree-l1"><a class="reference internal" href="concerns.html">3. Concerns</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. Implementation</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="concerns.html" title="previous chapter">3. Concerns</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Adam Charnock.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/implementation.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>