<StackLayout>

    <!--NEW CHAT DIALOG -->
    <pl-chat-new-chat
            *ngIf="isNewChatDialogShown()"
            (create)="dialogConfirmed($event)"
            (cancel)="dialogCanceled()"
            [data]="newChatDialogData">

    </pl-chat-new-chat>

    <GridLayout class="peek-nav-section"
                rows="auto" columns="auto, *, auto"
                *ngIf="!isNewChatDialogShown()">
        <WrapLayout class="btn-group"
                    row="0" col="2">
            <Button class="btn" text="New Chat" (tap)="newChatClicked()"></Button>
        </WrapLayout>
    </GridLayout>
    <StackLayout class="hr"></StackLayout>


    <!-- chat list -->
    <ListView class="plugin-chat-list" [items]="chats">
        <StackLayout class="chat-list-messages"
                     *ngFor="let i = index; let chat of chats"
                     [class.odd]="odd" [class.even]="even"
                     (tap)="chatClicked(chat)">
            <WrapLayout>

                <!-- Unread indicator -->
                <Label *ngIf="isChatRead(chat)" class="fa chat-list-icon"
                       [text]="'fa-fw' | fonticon"></Label>

                <Label *ngIf="!isChatRead(chat)" class="fa chat-list-icon"
                       [text]="'fa-comment-o' | fonticon"></Label>

                <!-- Users -->
                <WrapLayout *ngFor="let user of otherChatUsers(chat)">
                    <Label class="chat-list-title" textWrap="true"
                           text="{{userDisplayName(user)}} ({{user.userId}}) "></Label>
                </WrapLayout>

            </WrapLayout>
        </StackLayout>
    </ListView>
</StackLayout>

