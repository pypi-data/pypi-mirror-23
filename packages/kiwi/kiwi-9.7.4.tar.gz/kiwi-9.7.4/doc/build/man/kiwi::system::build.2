.\" Man page generated from reStructuredText.
.
.TH "KIWI::SYSTEM::BUILD" "2" "Jun 20, 2017" "9.7.4" "kiwi"
.SH NAME
kiwi::system::build \- Build image in combined prepare and create step
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
kiwi [global options] service <command> [<args>]

kiwi system build \-h | \-\-help
kiwi system build \-\-description=<directory> \-\-target\-dir=<directory>
    [\-\-allow\-existing\-root]
    [\-\-clear\-cache]
    [\-\-ignore\-repos]
    [\-\-set\-repo=<source,type,alias,priority>]
    [\-\-add\-repo=<source,type,alias,priority>...]
    [\-\-obs\-repo\-internal]
    [\-\-add\-package=<name>...]
    [\-\-delete\-package=<name>...]
    [\-\-signing\-key=<key\-file>...]
kiwi system build help
.ft P
.fi
.UNINDENT
.UNINDENT
.SH DESCRIPTION
.sp
build an image in one step. The build command combines kiwi’s prepare and
create steps in order to build an image with just one command call. The
build command creates the root directory of the image below
\fB<target\-dir>/build/image\-root\fP and if not specified differently writes
a log file \fB<target\-dir>/build/image\-root.log\fP\&. The result image files
are created in the specified target\-dir.
.SH OPTIONS
.INDENT 0.0
.TP
.BI \-\-add\-package\fB= <name>
specify package to add(install). The option can be specified
multiple times
.TP
.BI \-\-add\-repo\fB= <source,type,alias,priority>
Add a new repository to the existing repository setup in the XML
description. This option can be specified multiple times
.TP
.B \-\-allow\-existing\-root
Allow to use an existing root directory from an earlier
build attempt. Use with caution this could cause an inconsistent
root tree if the existing contents does not fit to the
former image type setup
.TP
.B \-\-clear\-cache
delete repository cache for each of the used repositories
before installing any package. This is useful if an image build
should take and validate the signature of the package from the
original repository source for any build. Some package managers
unconditionally trust the contents of the cache, which is ok for
cache data dedicated to one build but in case of kiwi the cache
is shared between multiple image builds on that host for performance
reasons.
.TP
.BI \-\-signing\-key\fB= <key\-file>
set the key file to be trusted and imported into the package
manager database before performing any opertaion. This is useful
if an image build should take and validate repository and package
signatures during build time. This option can be specified multiple
times
.TP
.BI \-\-delete\-package\fB= <name>
specify package to delete. The option can be specified
multiple times
.TP
.BI \-\-description\fB= <directory>
Path to the XML description. This is a directory containing at least
one _config.xml_ or _*.kiwi_ XML file.
.TP
.B \-\-obs\-repo\-internal
The repository source type \fBobs://\fP by default points to the
\fI\%Open Build Service\fP\&. With the
\fI–obs\-repo\-internal\fP option the source type is changed to the
\fBibs://\fP type, pointing to the \fBInternal Build Service\fP\&.
This allows to build images with repositories pointing to the SUSE
internal build service. Please note this requires access permissions
to the SUSE internal build service on the machine building the image.
.TP
.BI \-\-set\-repo\fB= <source,type,alias,priority>
Overwrite the first repository entry in the XML description with the
provided information:
.INDENT 7.0
.IP \(bu 2
\fBsource\fP
.sp
source url, pointing to a package repository which must be in a format
supported by the selected package manager. See the URI_TYPES section for
details about the supported source locators.
.IP \(bu 2
\fBtype\fP
.sp
repository type, could be one of \fBrpm\-md\fP, \fBrpm\-dir\fP or \fByast2\fP\&.
.IP \(bu 2
\fBalias\fP
.sp
An alias name for the repository. If not specified kiwi calculates
an alias name as result from a sha sum. The sha sum is used to uniquely
identify the repository, but not very expressive. We recommend to
set an expressive and uniq alias name.
.IP \(bu 2
\fBpriority\fP
.sp
A number indicating the repository priority. How the value is evaluated
depends on the selected package manager. Please refer to the package
manager documentation for details about the supported priority ranges
and their meaning.
.UNINDENT
.TP
.BI \-\-target\-dir\fB= <directory>
Path to store the build results.
.UNINDENT
.SH URI_TYPES
.INDENT 0.0
.IP \(bu 2
\fBhttp://\fP | \fBhttps://\fP | \fBftp://\fP
.sp
remote repository delivered via http or ftp protocol.
.IP \(bu 2
\fBobs://\fP
.sp
Open Buildservice repository. The source data is translated into
an http url pointing to \fI\%http://download.opensuse.org\fP\&.
.IP \(bu 2
\fBibs://\fP
.sp
Internal Open Buildservice repository. The source data is translated into
an http url pointing to download.suse.de.
.IP \(bu 2
\fBiso://\fP
.sp
Local iso file. kiwi loop mounts the file and uses the mount point
as temporary directory source type
.IP \(bu 2
\fBdir://\fP
.sp
Local directory
.UNINDENT
.SH AUTHOR
Marcus Schäfer
.SH COPYRIGHT
2016, Marcus Schäfer
.\" Generated by docutils manpage writer.
.
