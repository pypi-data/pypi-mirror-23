{% extends 'index.html' %}
{% load i18n %}
{% load cartoview_tags %}
{% block extra_head %}
    {{ block.super }}
    <style>
        .counters {
            padding: 20px;
            background: #0e426f;
            color: white;
        }

        .counters a {

            color: #ff8f31;
        }

        .button_shadow {
            background-color: #0d406d;
        }

        .badge {
            display: inline-block;
            min-width: 10px;
            padding: 3px 7px;
            font-size: 14px;
            font-weight: bold;
            color: #fff;
            line-height: 1;
            vertical-align: middle;
            white-space: nowrap;
            text-align: center;
            background-color: #3f90d6;
            border-radius: 10px;
        }

        .btn-circle {
            width: 30px;
            height: 30px;
            text-align: center;
            padding: 6px 0;
            font-size: 12px;
            line-height: 1.428571429;
            border-radius: 15px;
        }

        .btn-circle.btn-lg {
            width: 50px;
            height: 50px;
            padding: 10px 16px;
            font-size: 18px;
            line-height: 1.33;
            border-radius: 25px;
        }

        .btn-circle.btn-xl {
            width: 70px;
            height: 70px;
            padding: 10px 16px;
            font-size: 24px;
            line-height: 1.33;
            border-radius: 35px;
        }
    </style>
{% endblock %}
{% block hero %}
    <div id="site-banner" style="text-shadow: 2px 2px black;" class="jumbotron">
        <div class="container">
            <h1 style="text-align: center;">{% trans "Build Geo Apps" %}</h1>
            <h3 class="text-center">
                <span class="label label-success count" style="background: #69F0AE">{{ apps_instance_count }}</span>
                Apps
                Created
            </h3>
            <div class="row text-center" style="margin-top: 30px">
                {% if not user.is_authenticated %}
                    <div class="col-md-2 col-md-offset-4">
                        <a class="btn button_shadow btn-primary" style="color: white"
                           href="{% url 'account_login' %}?next={% url 'app_manager_base_url' %}"
                           role="button">
                            Create New
                        </a>
                    </div>
                {% else %}
                    <div class="col-md-2 col-md-offset-4">
                        <a class="btn button_shadow btn-primary" style="color: white"
                           href="{% url 'app_manager_base_url' %}"
                           role="button">
                            Create New
                        </a>
                    </div>
                {% endif %}

                <div class="col-md-2">
                    <a class="btn button_shadow btn-primary" style="color: white"
                       href="{% url 'appinstance_browse' %}"
                       role="button">
                        Explore
                    </a>
                </div>
            </div>
        </div>
        <div class="row" style="margin-top: 20px;padding: 10px">
            <p class="text-center">{% blocktrans %}
                <a href="http://cartoview.net" class="cartoview_install">Cartoview is open source. Install on your
                    Platform.
                </a>
            {% endblocktrans %}</p>
        </div>
    </div>
    <div class="row counters">
        <div class="col-md-2 text-center col-md-offset-1">
            <div class="row">
                <span class="badge badge-blue count">{% layers_counts %}</span>
            </div>
            <a href="{% url 'layer_browse' %}">Layers</a>

        </div>
        <div class="col-md-2 text-center">
            <div class="row ">
                <span class="badge badge-blue count">{% maps_counts %}</span>
            </div>
            <a href="{% url 'maps_browse' %}">Maps</a>
        </div>
        <div class="col-md-2 text-center">
            <div class="row">
                <span class="badge badge-blue count">{% users_counts %}</span>
            </div>
            <a href="{% url 'profile_browse' %}">Users</a>
        </div>
        <div class="col-md-2 text-center">
            <div class="row">
                <span class="badge badge-blue count">{% groups_counts %}</span>
            </div>
            <a href="{% url 'group_list' %}">Groups</a>
        </div>
        <div class="col-md-2 text-center">
            <div class="row">
                <span class="badge badge-blue count">{% apps_counts %}</span>
            </div>
            <a href="{% url 'appinstance_browse' %}">Apps</a>
        </div>
    </div>
    <div class="row text-center" style="padding: 20px">
        <h3>HOW IT WORKS</h3>
        <h5>Just a few Steps from creating your map to creating your App</h5>
        <div class="row" style="padding: 10px">
            <div class="col-md-3 text-center">
                <div class="row">
            <span class="fa-stack fa-2x">
              <i class="fa fa-circle fa-stack-2x"></i>
              <i class="fa fa-pencil fa-stack-1x fa-inverse"></i>
            </span>
                </div>
                <a href="{% url 'account_signup' %}">Register</a>

            </div>
            <div class="col-md-3 text-center">
                <div class="row">
                <span class="fa-stack fa-2x">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-upload fa-stack-1x fa-inverse"></i>
                </span>
                </div>
                <a href="{% url 'layer_upload' %}">Upload Layer</a>

            </div>
            <div class="col-md-3 text-center">
                <div class="row">
                <span class="fa-stack fa-2x">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-map fa-stack-1x fa-inverse"></i>
                </span>
                </div>
                <a href="{% url 'new_map' %}">Create Map</a>

            </div>
            <div class="col-md-3 text-center">
                <div class="row">
                <span class="fa-stack fa-2x">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-plus-square-o fa-stack-1x fa-inverse"></i>
                </span>
                </div>
                {% if not user.is_authenticated %}

                    <a href="{% url 'account_login' %}?next={% url 'app_manager_base_url' %}">Create Application</a>

                {% else %}

                    <a href="{% url 'app_manager_base_url' %}">
                        Create Application
                    </a>
                {% endif %}
            </div>
        </div>

    </div>
{% endblock %}
{% block mainbody %}
    {{ block.super }}
{% endblock %}
{% block extra_script %}
    {{ block.super }}
    <script>
        $('.count').each(function () {
            var $this = $(this);
            $({counter: 0}).animate({counter: $this.text()}, {
                duration: 1000,
                easing: 'swing',
                step: function () {
                    $this.text(Math.ceil(this.counter));
                }
            });
        });
    </script>
{% endblock %}
