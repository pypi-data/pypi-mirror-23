#+OPTIONS: ^:nil
#+OPTIONS: toc:nil
#+OPTIONS: html-postamble:nil
#+OPTIONS: num:nil
#+TITLE: create-uaa-clients

* Inputs
  | *arg name*        | *JSON type* | *example*                                                                          | *description*           |
  | uaa_uri           | string      | "https://079e5b8e-3d78-4140-b27c-ba038918ffea.predix-uaa.run.asv-pr.ice.predix.io" | uaa url                 |
  | uaa_client_secret | string      | "***REMOVED***"                                                                           | uaa admin secret        |
  | client_payloads   | list        | (see below)                                                                        | list of client payloads |

** Examples:
   - create uaa clients for ui-app-hub's config manager
   #+BEGIN_SRC js
	{
	   "uaa_uri": "https://079e5b8e-3d78-4140-b27c-ba038918ffea.predix-uaa.run.asv-pr.ice.predix.io",
	   "uaa_client_secret": "***REMOVED***",
	   "client_payloads" : [{
	      "client_id": "cm_client_id",
	      "client_secret": "***REMOVED***",
	      "authorized_grant_types": ["client_credentials"],
	      "autoapprove": ["openid"],
	      "scope": ["uaa.none", "openid", "hub.config.read", "hub.config.write", "hub.config.admin"],
	      "authorities": ["openid", "hub.config.read", "hub.config.write", "hub.config.admin"],
	   }, {
	      "client_id": "sb_client_id",
	      "client_secret": "***REMOVED***",
	      "authorized_grant_types": ["client_credentials"],
	      "autoapprove": ["openid"],
	      "scope": ["uaa.none", "openid", "hub.config.write"],
	      "authorities": ["openid", "hub.config.write"],
	   }, {
	      "client_id": "***REMOVED***_client_id",
	      "client_secret": "***REMOVED***",
	      "authorized_grant_types": ["client_credentials"],
	      "autoapprove": ["openid"],
	      "scope": ["uaa.none", "openid", "hub.config.read"],
	      "authorities": ["openid", "hub.config.read"],
	   }, {
	      "client_id": "acs_client_id",
	      "client_secret": "acs_client_secret",
	      "authorized_grant_types": ["client_credentials"],
	      "autoapprove": ["openid"],
	      "scope": ["uaa.none", "openid", "acs.policies.read", "acs.policies.write", "acs.attributes.read", "acs.attributes.write", "acs_zone"],
	      "authorities": ["openid", "acs.policies.read", "acs.policies.write", "acs.attributes.read", "acs.attributes.write", "uaa.resource", "uaa.none", "acs_oauth_scope"],
	   }]
	}
   #+END_SRC

* Output
  #+BEGIN_SRC js
  {}
  #+END_SRC

* Idempotence
  The script may be called any number of times. If a client exists, it is deleted and re-created, to ensure it has the specified payload.
