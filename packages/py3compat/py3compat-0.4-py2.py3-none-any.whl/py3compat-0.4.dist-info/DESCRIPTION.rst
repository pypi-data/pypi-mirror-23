Based on Jinja2._compat module.
Some py2/py3 compatibility support based on a stripped down version of six so we don't have to depend on a specific version of it.

