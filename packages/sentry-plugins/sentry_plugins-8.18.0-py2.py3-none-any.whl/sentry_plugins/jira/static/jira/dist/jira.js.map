{"version":3,"sources":["webpack:///webpack/bootstrap 56dc6422e4c20665d3e0","webpack:///external \"React\"","webpack:///external \"Sentry\"","webpack:///./components/issueActions.jsx","webpack:///./components/settings.jsx","webpack:///external \"underscore\"","webpack:///./jira.jsx"],"names":["IssueActions","action","name","value","key","formData","state","LOADING","setState","onLoad","bind","api","request","getPluginCreateEndpoint","encodeURIComponent","success","data","oldData","createFormData","forEach","field","val","choices","find","c","default","createFieldList","error","loading","onLoadSuccess","errorHandler","form","props","actionType","renderField","has_autocomplete","Object","assign","url","getGroup","id","plugin","slug","config","onChange","changeField","isRequired","f","required","fields","requiredFields","filter","map","optionalFields","createIssue","length","DefaultIssuePlugin","DefaultIssueActions","Settings","PAGE_FIELD_LIST","back","startEditing","isLastPage","page","default_project","getPluginEndpoint","initialData","defaultValue","fieldList","editing","onLoadError","isEqual","onSaveSuccess","onSaveComplete","default_issue_type","default_priority","method","errors","onSaveError","responseJSON","complete","ev","preventDefault","SAVING","ERROR","isSaving","onSubmit","submitLabel","includes","readonly","__all__","formErrors","BasePlugin","DefaultSettings","Jira","displayName","add"],"mappings":"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","file":"jira.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 56dc6422e4c20665d3e0","module.exports = React;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 0\n// module chunks = 0","module.exports = Sentry;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Sentry\"\n// module id = 1\n// module chunks = 0","import React from 'react';\nimport {Form, FormState, plugins} from 'sentry';\n\n\nclass IssueActions extends plugins.DefaultIssuePlugin.DefaultIssueActions {\n  changeField(action, name, value) {\n    let key = action + 'FormData';\n    let formData = {\n      ...this.state[key],\n      [name]: value\n    };\n    let state = {\n      [key]: formData\n    };\n    if (name === 'issuetype') {\n      state.state = FormState.LOADING;\n      this.setState(state, this.onLoad.bind(this, () => {\n        this.api.request((this.getPluginCreateEndpoint() +\n                          '?issuetype=' + encodeURIComponent(value)), {\n          success: (data) => {\n            // Try not to change things the user might have edited\n            // unless they're no longer valid\n            let oldData = this.state.createFormData;\n            let createFormData = {};\n            data.forEach((field) => {\n              let val;\n              if (field.choices && !field.choices.find(c => c[0] === oldData[field.name])) {\n                val = field.default;\n              } else {\n                val = oldData[field.name] || field.default;\n              }\n              createFormData[field.name] = val;\n            });\n            this.setState({\n              createFieldList: data,\n              error: null,\n              loading: false,\n              createFormData: createFormData\n            }, this.onLoadSuccess);\n          },\n          error: this.errorHandler\n        });\n      }))\n      return;\n    }\n    this.setState(state);\n  }\n\n  renderForm() {\n    let form;\n\n    // For create form, split into required and optional fields\n    if (this.props.actionType === 'create') {\n      if (this.state.createFieldList) {\n        let renderField = (field) => {\n          if (field.has_autocomplete) {\n            field = Object.assign({\n              url: ('/api/0/issues/' + this.getGroup().id +\n                    '/plugins/' + this.props.plugin.slug + '/autocomplete')\n            }, field);\n          }\n          return (\n            <div key={field.name}>\n              {this.renderField({\n                config: field,\n                formData: this.state.createFormData,\n                onChange: this.changeField.bind(this, 'create', field.name)\n              })}\n            </div>\n          );\n        };\n        let isRequired = (f) => {\n          return f.required != null ? f.required : true;\n        };\n\n        let fields = this.state.createFieldList;\n        let requiredFields = fields.filter(f => isRequired(f)).map(f => renderField(f));\n        let optionalFields = fields.filter(f => !isRequired(f)).map(f => renderField(f));\n        form = (\n          <Form onSubmit={this.createIssue} submitLabel='Create Issue' footerClass=\"\">\n            <h5>Required Fields</h5>\n            {requiredFields}\n            {optionalFields.length ? <h5>Optional Fields</h5> : null}\n            {optionalFields}\n          </Form>\n        );\n      }\n    } else {\n      form = super.renderForm();\n    }\n\n    return form;\n  }\n}\n\nexport default IssueActions;\n\n\n\n// WEBPACK FOOTER //\n// ./components/issueActions.jsx","import React from 'react';\nimport _ from 'underscore';\nimport {Form, FormState, LoadingIndicator, plugins} from 'sentry';\n\n\nclass Settings extends plugins.BasePlugin.DefaultSettings {\n  constructor(props) {\n    super(props);\n    this.PAGE_FIELD_LIST = {\n      '0': ['instance_url', 'username', 'password'],\n      '1': ['default_project'],\n      '2': ['ignored_fields','default_priority', 'default_issue_type', 'auto_create']\n    }\n\n    this.back = this.back.bind(this);\n    this.startEditing = this.startEditing.bind(this);\n    this.isLastPage = this.isLastPage.bind(this);\n\n    Object.assign(this.state, {\n      page: 0\n    });\n  }\n\n  isConfigured(state) {\n    state = state || this.state;\n    return !!(this.state.formData && this.state.formData.default_project);\n  }\n\n  isLastPage() {\n    return this.state.page === 2;\n  }\n\n  fetchData() {\n    // This is mostly copy paste of parent class\n    // except for setting edit state\n    this.api.request(this.getPluginEndpoint(), {\n      success: data => {\n        let formData = {};\n        let initialData = {};\n        data.config.forEach((field) => {\n          formData[field.name] = field.value || field.defaultValue;\n          initialData[field.name] = field.value;\n        });\n        this.setState({\n          fieldList: data.config,\n          formData: formData,\n          initialData: initialData,\n          // start off in edit mode if there isn't a project set\n          editing: !(formData && formData.default_project),\n        // call this here to prevent FormState.READY from being\n        // set before fieldList is\n        }, this.onLoadSuccess);\n      },\n      error: this.onLoadError\n    });\n  }\n\n  startEditing() {\n    this.setState({editing: true});\n  }\n\n  onSubmit() {\n    if (_.isEqual(this.state.initialData, this.state.formData)) {\n      if (this.isLastPage()) {\n        this.setState({editing: false, page: 0})\n      } else {\n        this.setState({page: this.state.page + 1});\n      }\n      this.onSaveSuccess(this.onSaveComplete);\n      return;\n    }\n    let formData = Object.assign({}, this.state.formData);\n    // if the project has changed, it's likely these values aren't valid anymore\n    if (formData.default_project !== this.state.initialData.default_project) {\n      formData.default_issue_type = null;\n      formData.default_priority = null;\n    }\n    this.api.request(this.getPluginEndpoint(), {\n      data: formData,\n      method: 'PUT',\n      success: this.onSaveSuccess.bind(this, data => {\n        let formData = {};\n        let initialData = {};\n        data.config.forEach((field) => {\n          formData[field.name] = field.value || field.defaultValue;\n          initialData[field.name] = field.value;\n        });\n        let state = {\n          formData: formData,\n          initialData: initialData,\n          errors: {},\n          fieldList: data.config\n        };\n        if (this.isLastPage()) {\n          state.editing = false;\n          state.page = 0;\n        } else {\n          state.page = this.state.page + 1;\n        }\n        this.setState(state);\n      }),\n      error: this.onSaveError.bind(this, error => {\n        this.setState({\n          errors: (error.responseJSON || {}).errors || {},\n        });\n      }),\n      complete: this.onSaveComplete\n    });\n  }\n\n  back(ev) {\n    ev.preventDefault();\n    if (this.state.state === FormState.SAVING) {\n      return;\n    }\n    this.setState({\n      page: this.state.page - 1\n    });\n  }\n\n  render() {\n    if (this.state.state === FormState.LOADING) {\n      return <LoadingIndicator />;\n    }\n\n    if (this.state.state === FormState.ERROR && !this.state.fieldList) {\n      return (\n        <div className=\"alert alert-error m-b-1\">\n          An unknown error occurred. Need help with this? <a href=\"https://sentry.io/support/\">Contact support</a>\n        </div>\n      );\n    }\n\n    let isSaving = this.state.state === FormState.SAVING;\n\n    let fields;\n    let onSubmit;\n    let submitLabel;\n    if (this.state.editing) {\n      fields = this.state.fieldList.filter(f => {\n        return this.PAGE_FIELD_LIST[this.state.page].includes(f.name);\n      });\n      onSubmit = this.onSubmit;\n      submitLabel = this.isLastPage() ? 'Finish' : 'Save and Continue';\n    } else {\n      fields = this.state.fieldList.map(f => {\n        return Object.assign({}, f, {readonly: true});\n      });\n      onSubmit = this.startEditing;\n      submitLabel = 'Edit';\n    }\n    return (\n      <Form onSubmit={onSubmit}\n            submitDisabled={isSaving}\n            submitLabel={submitLabel}\n            extraButton={this.state.page === 0 ? null :\n                         <a href=\"#\"\n                            className={'btn btn-default pull-left' + (isSaving ? ' disabled' : '')}\n                            onClick={this.back}>Back</a>}>\n        {this.state.errors.__all__ &&\n          <div className=\"alert alert-block alert-error\">\n            <ul>\n              <li>{this.state.errors.__all__}</li>\n            </ul>\n          </div>\n        }\n        {fields.map(f => {\n          return this.renderField({\n            config: f,\n            formData: this.state.formData,\n            formErrors: this.state.errors,\n            onChange: this.changeField.bind(this, f.name)\n          });\n        })}\n      </Form>\n    );\n  }\n}\n\nexport default Settings;\n\n\n\n// WEBPACK FOOTER //\n// ./components/settings.jsx","module.exports = underscore;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"underscore\"\n// module id = 4\n// module chunks = 0","import React from 'react';\nimport {plugins} from 'sentry';\n\nimport Settings from './components/settings';\nimport IssueActions from './components/issueActions';\n\nclass Jira extends plugins.DefaultIssuePlugin {\n    renderSettings(props) {\n        return <Settings plugin={this} {...props} />;\n    }\n\n    renderGroupActions(props) {\n        return <IssueActions plugin={this} {...props} />\n    }\n}\n\nJira.displayName = 'Jira';\n\nplugins.add('jira', Jira);\n\nexport default Jira;\n\n\n\n// WEBPACK FOOTER //\n// ./jira.jsx"],"sourceRoot":""}